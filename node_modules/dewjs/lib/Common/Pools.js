/**
 * @author     LiuZhaoHui <hi.liuzhaoxin@gmail.com>
 * @link       http://www.eatbean.com/nodejs
**/

"use strict";

module.exports = Pools;

function Pools ()
{
		this._pools = [];
		this._index = [];
}

Pools.prototype = 
{
    constructor : Pools, 
    __name__ : "Pools", 
    
    length : 0, 
    
    addObject : function ()
    {
        var args = arguments;
        var i = 0, len = args.length;
        
        if (len === 0) return;
        
        for (; i < len; i++)
        {
            this._pools.push(args[i]);
            this._index.push(false);
        }
        
        this.length += len;
    }, 
    
    borrowObject : function ()
    {
        var index = this._index;
        var i = 0, len = index.length;
        
        for (; i < len; i++)
        {
            if (index[i] === false)
            {
                index[i] = true;
                return this._pools[i];
            }
        }
        
        return null;
    }, 
    
    returnObject : function (obj)
    {
        var pools = this._pools;
        var i = 0, len = pools.length;
        
        for (; i < len; i++)
        {
            if (pools[i] === obj)
            {
                this._index[i] = false;
                return true;
            }
        }
        
        return false;
    }
};