/**
 * @author     LiuZhaoHui <hi.liuzhaoxin@gmail.com>
 * @link       http://www.eatbean.com/nodejs
**/

"use strict";

var querystring = require("querystring");

var Urlencoded = 
{
    __name__ : "Urlencoded", 
    
    _data : "", 
    
    initialize : function ()
    {
        
    }, 
    
    // 返回一个 Urlencoded 实例
    getInstance : function (request)
    {
        var self = Object.create(this);
        self._request = request;
        
        return self;
    }, 
    
    write : function (chunk)
    {
        this._data += chunk.toString("ascii");
        
        return chunk.length;
    }, 
    
    end : function ()
    {
        this._request._posts = querystring.parse(this._data);
    }, 
    
    error : function () { }
};

module.exports = Urlencoded;