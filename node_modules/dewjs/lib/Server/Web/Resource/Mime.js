/**
 * @author     LiuZhaoHui <hi.liuzhaoxin@gmail.com>
 * @link       http://www.eatbean.com/nodejs
**/

"use strict";

var fs = require("fs");

var Mime = 
{
    __name__ : "Mime", 
    
    _types : JSON.parse(fs.readFileSync(__dirname + "/Mime.json", "ascii")), 
    _defaultType : "application/octet-stream", 
    
    // define("text/html", ["shtml", "html", "htm"])
    define : function (type, exts)
    {
        var i = 0, len = exts.length, key;
        
        for (; i < len; i++)
        {
            key = exts[i];
            
            if (!(key in this._types))
            {
                this._types[key] = type;
            }
        }
    }, 
    
    lookup : function (ext, def)
    {
        if (ext in this._types)
        {
            return this._types[ext];
        }
        
        if (undefined === def)
        {
            return this._defaultType;
        }
        
        return def;
    }
};

module.exports = Mime;